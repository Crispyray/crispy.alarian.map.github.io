<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Carte H&D Alarian</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        #map {
            width: 95%;
            height: 90vh;
            margin: 0 auto;
        }
        #coordinates {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background-color: white;
            padding: 5px;
            border: 1px solid #ccc;
            box-shadow: 0 0 5px #888;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="coordinates">Coordonnées de la souris : </div>

    <script>
        var imagePaths = {
            talbethHav: './images/Entetes-TalbethHav.jpg',
            qereanHav: './images/Entetes-QereanHav.jpg',
            candelle: './images/Entetes-Candelle.jpg',
            kelgen: './images/Entetes-Kelgen.jpg',
            // Ajoutez d'autres chemins d'images ici...
        };
        var cityIcon = L.icon({
            iconUrl: './images/IcoVille.png',
            iconSize: [62, 64],
            iconAnchor: [16, 32],
            popupAnchor: [0, -32]
        });

        // Créer une icône pour les lieux-dits
        var landmarkIcon = L.icon({
            iconUrl: './images/IcoEye.png',
            iconSize: [51, 36],
            iconAnchor: [16, 32],
            popupAnchor: [0, -32]
        });
        var cities = [
            {
                name: "Talbeth-Hav",
                latlng: [1.864, -1.967],
                description: '<img src="' + imagePaths.talbethHav + '"><br>Chef-lieu de l’Ystaad, Talbeth-Hav est aussi la capitale du royaume d’Alarian. Ses habitants sont appelés les Talbethiens et Talbethiennes.',
                icon: cityIcon
            },
            {
                name: "Qerean-Hav",
                latlng: [3.87, -2.712],
                description: '<img src="' + imagePaths.qereanHav + '"> <br>Aventure : \"La Nef des Ombres\".',
                icon: cityIcon
            },
            {
                name: "Kelgen",
                latlng: [2.922, -1.983],
                description: '<img src="' + imagePaths.kelgen + '"> <br>Village où les aventuriers ont élu domicile <br> Aventure : \"Le Miroir Brisé\".',
                icon: cityIcon
            }
            // Ajoutez d'autres villes ici...
        ];

        var landmarks = [
            {
                name: "Point 1",
                latlng: [0.5, 2.0],
                description: "<br>Informations sur le point 1.",
                icon: landmarkIcon
            },
            {
                name: "La Candelle",
                latlng: [3.867, -2.605],
                description: '<img src="' + imagePaths.candelle + '"><br>Aventure : \"La Nef des Ombres\".<br>La candelle est un pic rocheux à flanc de falaise, son accès est difficile car dans l\'estuaire la mer est mauvaise, peu connaissent son existance.',
                icon: landmarkIcon
            },
            // Ajoutez d'autres lieux-dits ici...
        ];

        var citiesGroup = L.layerGroup();
        var landmarksGroup = L.layerGroup();

        var map = L.map('map', {
            zoomSnap: 0.25,
            zoomDelta: 0.51,
            wheelPxPerZoomLevel: 600,
            layers: [citiesGroup, landmarksGroup]
        });

        var imageUrl = './images/alarian.jpg';
        var imageBounds = [[-8.7, -6], [8.7, 6]];

        var image = L.imageOverlay(imageUrl, imageBounds).addTo(map);

        L.control.scale({ imperial: false }).addTo(map);

        var coordinatesDiv = document.getElementById('coordinates');
        map.on('mousemove', function(event) {
            var lat = event.latlng.lat.toFixed(6);
            var lng = event.latlng.lng.toFixed(6);
            coordinatesDiv.innerHTML = 'Coordonnées de la souris : ' + lat + ', ' + lng;
        });

        function addPointsOfInterestToGroup(points, group) {
            points.forEach(function(point) {
                var marker = L.marker(point.latlng);
                marker.bindTooltip(point.name).openTooltip();
                marker.bindPopup(point.description, { minWidth: 376, maxWidth: 376 });
                marker.addTo(group);
            });
        }

        addPointsOfInterestToGroup(cities, citiesGroup);
        addPointsOfInterestToGroup(landmarks, landmarksGroup);

        map.fitBounds(imageBounds);
        image.addTo(map);
        map.setZoom(6.25);
        
        L.control.layers({}, {
            "Villes": citiesGroup,
            "Lieux-Dits": landmarksGroup
        }).addTo(map);
    </script>
</body>
</html>
