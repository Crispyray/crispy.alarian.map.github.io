<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Carte H&D Alarian</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

    <!-- Inclure les styles -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
    <!-- Inclure Leaflet et Leaflet Draw -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>

    <style>
        #map {
            width: 95%;
            height: 90vh;
            margin: 0 auto;
        }
        #coordinates {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background-color: white;
            padding: 5px;
            border: 1px solid #ccc;
            box-shadow: 0 0 5px #888;
            z-index: 1000;
        }
        #length-display {
            position: absolute;
            bottom: 10px;
            right: 40px;
            background-color: white;
            padding: 5px;
            border: 1px solid #ccc;
            box-shadow: 0 0 5px #888;
            z-index: 1000;
        }
        .leaflet-draw-draw-polyline path {
            stroke: red;
            stroke-width: 4px;
            stroke-linejoin: round;
        }
    </style>
</head>
<body>
    <div id="length-display">Distance : </div>
    <div id="coordinates">Coordonnées : </div>
    <div id="map-container">
        <div id="map"></div>
    </div>

    <script>
        var youAreHere = [3.851, -2.7015];
        var imagePaths = {
            talbethHav: './images/Entetes-TalbethHav.jpg',
            qereanHav: './images/Entetes-QereanHav.jpg',
            candelle: './images/Entetes-Candelle.jpg',
            kelgen: './images/Entetes-Kelgen.jpg',
            foretYfondh: './images/Entetes-ForetYfondh.jpg',
            youAreHerePath: './images/Entetes-VousEtesIci.jpg',
        };
        var cityIcon = L.icon({
            iconUrl: './images/IcoVille.png',
            iconSize: [60, 40],
            iconAnchor: [18, 40],
            popupAnchor: [0, -45]
        });

        // Créer une icône pour les lieux-dits
        var landmarkIcon = L.icon({
            iconUrl: './images/IcoEye.png',
            iconSize: [28, 16],
            iconAnchor: [14, 8],
            popupAnchor: [0, -16]
        });
        var hdIcon = L.icon({
            iconUrl: './images/IcoHetD.png',
            iconSize: [64, 64],
            iconAnchor: [0, 64],
            popupAnchor: [0, 0]
        });
        var cities = [
            {
                name: "Talbeth-Hav",
                latlng: [1.864, -1.967],
                description: '<img src="' + imagePaths.talbethHav + '"><br>Chef-lieu de l’Ystaad, Talbeth-Hav est aussi la capitale du royaume d’Alarian. Ses habitants sont appelés les Talbethiens et Talbethiennes.'
            },
            {
                name: "Qerean-Hav",
                latlng: [3.87, -2.712],
                description: '<img src="' + imagePaths.qereanHav + '"> <br>Aventure : "La Nef des Ombres".'
            },
            {
                name: "Kelgen",
                latlng: [2.922, -1.983],
                description: '<img src="' + imagePaths.kelgen + '"> <br>Kelgen est une petite ville ou un grand village. Pittoresque, avec sa place du marché et ses quelques auberges réputées (dont celle du "Faisant Doré"), ces parcs et allentours verdurés/verdoyants...<br> c\'est tout naturellement que nos aventuriers y ont élu domicile <br><br> Aventure : "Le Miroir Brisé".'
            }
        ];

        var landmarks = [
            {
                name: "Forêt d'Yfondh",
                latlng: [3.505, -2.707],
                description: '<img src="' + imagePaths.foretYfondh + '"><br>La forêt d\'Yfondh est une forêt assez dense réputée pour être la zone où les guildes de maraudes et de brigands se réfugient une fois leurs méfaits accomplis.<br> Nos compagnons ont dernièrement aperçu y pénétrer une armée composée de différents groupes armés provenant de multiples régions (dont la milice de Talbeth-Hav).'
            },
            {
                name: "La Candelle",
                latlng: [3.867, -2.605],
                description: '<img src="' + imagePaths.candelle + '"><br>Aventure : "La Nef des Ombres".<br>La Candelle est un pic rocheux à flanc de falaise, son accès est difficile car dans l\'estuaire la mer est mauvaise, peu connaissent son existence.'
            }
        ];
        var posHeros = [
            {
                name: "Vous êtes ici!",
                latlng: youAreHere,
                description: '<img src="' + imagePaths.youAreHerePath + '">'
            }
        ];

        var citiesGroup = L.layerGroup();
        var landmarksGroup = L.layerGroup();
        var youAreHereGroup = L.layerGroup();
        var provincesLayer = L.layerGroup();

        /////////////////////////////////////////////////
// Créez un tableau d'objets avec les données de vos provinces (cet exemple utilise des données factices)
var provinceData = [
    {
        type: "Feature",
        properties: {
            name: "Province A",
            population: 1500000,
            area: 25000,
        },
        geometry: {
            type: "Polygon",
            coordinates: [
                [
                    [0, 0],
                    [0, 5],
                    [5, 5],
                    [5, 0],
                    [0, 0]
                ]
            ]
        }
    },
    {
        type: "Feature",
        properties: {
            name: "Province B",
            population: 800000,
            area: 12000,
        },
        geometry: {
            type: "Polygon",
            coordinates: [
                 [
            [
              180.3072420515265,
              -89.69064953070149
            ],
            [
              183.92774568993127,
              -89.6991966104755
            ],
            [
              187.49722298178148,
              -89.69788418933692
            ],
            [
              191.02400383019727,
              -89.68823182737158
            ],
            [
              194.55076950578535,
              -89.67827108319305
            ],
            [
              197.65876409455012,
              -89.66421409698681
            ],
            [
              201.05240304853334,
              -89.65569754980216
            ],
            [
              204.988623671497,
              -89.65831570457702
            ],
            [
              208.92484429448217,
              -89.6609139505369
            ],
            [
              212.8541460908005,
              -89.66050909257517
            ],
            [
              216.77692355498738,
              -89.65726548537229
            ],
            [
              220.42416178234475,
              -89.65071488200321
            ],
            [
              223.166884807933,
              -89.63285655479427
            ],
            [
              225.9226413249351,
              -89.61417663062842
            ],
            [
              228.88899721461036,
              -89.59609558342467
            ],
            [
              231.85535310426377,
              -89.57716720912342
            ],
            [
              235.67856622526142,
              -89.57224470176804
            ],
            [
              239.6193387078742,
              -89.5692925679208
            ],
            [
              243.5601415362289,
              -89.56631994559733
            ],
            [
              247.51517651238777,
              -89.56549964029205
            ],
            [
              251.47561302864221,
              -89.56549964029205
            ],
            [
              255.27125705309004,
              -89.55928356937856
            ],
            [
              258.9198456654606,
              -89.5472733771718
            ],
            [
              262.56840393211075,
              -89.53493614229232
            ],
            [
              266.198845797411,
              -89.53432846728836
            ],
            [
              269.80828841688435,
              -89.54739001337713
            ],
            [
              273.5059460761764,
              -89.55394100795749
            ],
            [
              277.38504086066615,
              -89.5476799751908
            ],
            [
              281.2641356451775,
              -89.54133106233165
            ],
            [
              285.14320008394714,
              -89.5348930359706
            ],
            [
              289.0222645227383,
              -89.5283647702865
            ],
            [
              292.65856311408817,
              -89.51532389035557
            ],
            [
              296.2872145812489,
              -89.50171280515968
            ],
            [
              299.9158357026678,
              -89.48771949184535
            ],
            [
              303.5444568241083,
              -89.47333335696356
            ],
            [
              307.03570282162616,
              -89.45636342870063
            ],
            [
              310.15503154089055,
              -89.4327096522285
            ],
            [
              313.27432991441316,
              -89.40802672855807
            ],
            [
              315.58527870750623,
              -89.37401253312161
            ],
            [
              318.13966095407943,
              -89.34075407392113
            ],
            [
              321.3079980287818,
              -89.31283846773772
            ],
            [
              322.28579817074166,
              -89.2654218443816
            ],
            [
              324.19199560470946,
              -89.22471985333708
            ],
            [
              327.70521191142467,
              -89.19958327570595
            ],
            [
              331.2184282181397,
              -89.1736319791151
            ],
            [
              334.73161417911285,
              -89.14683934382013
            ],
            [
              338.21894557734333,
              -89.11863096580599
            ],
            [
              341.0394902298792,
              -89.07481049833397
            ],
            [
              344.385471213459,
              -89.04071562485153
            ],
            [
              347.859996713231,
              -89.0083603510423
            ],
            [
              350.76626805564433,
              -88.96166748302059
            ],
            [
              354.00849698517914,
              -88.92281297434617
            ],
            [
              357.6941680807389,
              -88.8952158740791
            ],
            [
              361.3798391763205,
              -88.86691153699857
            ],
            [
              365.1010147770795,
              -88.84167973950551
            ],
            [
              368.9487320758069,
              -88.8292582684085
            ],
            [
              372.67285121246186,
              -88.81763071756657
            ],
            [
              374.5212400290029,
              -88.87516278049277
            ],
            [
              372.647330452749,
              -88.93466322022145
            ],
            [
              370.061388646006,
              -88.98900031912417
            ],
            [
              367.4754468392629,
              -89.04056650210025
            ],
            [
              364.8895353782401,
              -89.08950253691239
            ],
            [
              362.3036239172171,
              -89.13594278220458
            ],
            [
              359.717682110474,
              -89.18001471401968
            ],
            [
              357.2634104302266,
              -89.2233003383688
            ],
            [
              355.17173988882803,
              -89.26744248911719
            ],
            [
              353.0953332500874,
              -89.30912781601577
            ],
            [
              350.4791670953381,
              -89.34406493302168
            ],
            [
              347.8630009405888,
              -89.37723569781399
            ],
            [
              345.0591464400569,
              -89.40671066610992
            ],
            [
              341.98433490806485,
              -89.43200149891054
            ],
            [
              339.3645879570581,
              -89.45966405697185
            ],
            [
              337.5994678261728,
              -89.49208499670601
            ],
            [
              336.3050706734447,
              -89.52408251860496
            ],
            [
              335.2126850515069,
              -89.55467536144558
            ],
            [
              334.52471698564284,
              -89.5837861528648
            ],
            [
              334.1668194350874,
              -89.6114335283974
            ],
            [
              335.0945187752717,
              -89.63279510347625
            ],
            [
              337.92856727808964,
              -89.64902107369198
            ],
            [
              339.46333296549983,
              -89.67068808843116
            ],
            [
              340.90627247111377,
              -89.69116626401976
            ],
            [
              341.63535900237866,
              -89.71145182464394
            ],
            [
              342.10978415971726,
              -89.73043771816637
            ],
            [
              341.59427088269797,
              -89.74829319527008
            ],
            [
              341.0787576057004,
              -89.76496582995775
            ],
            [
              340.56321398298246,
              -89.78053421943967
            ],
            [
              340.04770070596317,
              -89.79507143593106
            ],
            [
              339.59348580544577,
              -89.80867004589213
            ],
            [
              339.1692524870648,
              -89.82137754331477
            ],
            [
              337.33130260196424,
              -89.83174208686992
            ],
            [
              335.1327847419808,
              -89.8411430191999
            ],
            [
              332.93426688197565,
              -89.85001878188116
            ],
            [
              330.6838881678405,
              -89.8583091338304
            ],
            [
              328.3545802075494,
              -89.86601256266779
            ],
            [
              326.100195856923,
              -89.87340355862771
            ],
            [
              324.4508143437931,
              -89.88111443594732
            ],
            [
              322.80140248494314,
              -89.88835559204975
            ],
            [
              321.82335957713536,
              -89.89555098534548
            ],
            [
              321.05949683821495,
              -89.90240036357673
            ],
            [
              320.29162846282463,
              -89.90879923297206
            ],
            [
              319.5017290867753,
              -89.91477207742814
            ],
            [
              318.7117993649841,
              -89.92035371143074
            ],
            [
              316.90167651515196,
              -89.92509917360216
            ],
            [
              314.19644564011594,
              -89.92856131086474
            ],
            [
              310.8613284282324,
              -89.93117535361061
            ],
            [
              307.6021362351255,
              -89.93381924293176
            ],
            [
              304.454343220231,
              -89.93653790339941
            ],
            [
              301.29765890620905,
              -89.93913179604972
            ],
            [
              298.01940959405874,
              -89.94144740591622
            ],
            [
              294.74116028193015,
              -89.94367489320467
            ],
            [
              291.30025785201406,
              -89.94551361027312
            ],
            [
              287.5711923612177,
              -89.94676743146425
            ],
            [
              284.29752525445855,
              -89.94869833476976
            ],
            [
              281.5788815663661,
              -89.94785615004822
            ],
            [
              278.3200231762893,
              -89.94693834873507
            ],
            [
              276.5488642449682,
              -89.94355424440498
            ],
            [
              273.73217350023623,
              -89.94081454130314
            ],
            [
              270.69371615388974,
              -89.93813144990278
            ],
            [
              267.6552588075435,
              -89.93532675854507
            ],
            [
              264.6168014612186,
              -89.93239492197213
            ],
            [
              261.69751180021944,
              -89.92916413340801
            ],
            [
              258.7170451456856,
              -89.92588634381413
            ],
            [
              255.39440002918695,
              -89.92304541923832
            ],
            [
              252.07172456698964,
              -89.92009555409327
            ],
            [
              248.3748103781124,
              -89.92024890143833
            ],
            [
              244.53552919258,
              -89.92159039915308
            ],
            [
              240.76915362559566,
              -89.92323214774345
            ],
            [
              237.03743288334272,
              -89.92498888941938
            ],
            [
              233.2995974762996,
              -89.92668240675361
            ],
            [
              229.53117357250017,
              -89.92822498961259
            ],
            [
              225.76279518727011,
              -89.92973511695097
            ],
            [
              221.93736682792075,
              -89.9309557464765
            ],
            [
              218.06221698843876,
              -89.93193411254602
            ],
            [
              214.15024260446444,
              -89.93243537049615
            ],
            [
              210.28405992846456,
              -89.9328625687273
            ],
            [
              206.68812115925152,
              -89.93477942057997
            ],
            [
              202.80197099230003,
              -89.93488396731853
            ],
            [
              199.8006264748849,
              -89.93188008832837
            ],
            [
              199.3990007260628,
              -89.92765652582801
            ],
            [
              197.85481268919494,
              -89.92329546797784
            ],
            [
              198.55373556393738,
              -89.91789825394356
            ],
            [
              198.80257055753447,
              -89.91217482746819
            ],
            [
              196.71059655882584,
              -89.90702843062205
            ],
            [
              192.9614118484339,
              -89.9067302436881
            ],
            [
              189.5013157437014,
              -89.90855265200442
            ],
            [
              186.07918214838952,
              -89.91091036930334
            ],
            [
              183.0706608655886,
              -89.91308972500006
            ],
            [
              181.92271221033963,
              -89.91640588254714
            ],
            [
              180.25635226074525,
              -89.92121646166541
            ],
            [
              178.00912950263353,
              -89.92466584000657
            ],
            [
              177.33873161496155,
              -89.92874503416537
            ],
            [
              174.3229880482271,
              -89.93176132260051
            ],
            [
              170.48329719533172,
              -89.93268643173664
            ],
            [
              167.560138453636,
              -89.93517257323842
            ],
            [
              163.78314188084664,
              -89.93646556363102
            ],
            [
              161.0620250156835,
              -89.93927476370979
            ],
            [
              159.70849920623567,
              -89.94218405967864
            ],
            [
              156.59762177303725,
              -89.94389277852463
            ],
            [
              154.94344563443173,
              -89.94670057040173
            ],
            [
              151.14393252928733,
              -89.94741749566418
            ],
            [
              151.03617483875092,
              -89.95031236236878
            ],
            [
              151.4339011611563,
              -89.95314188452075
            ],
            [
              150.11581916544583,
              -89.95561610979695
            ],
            [
              147.94710081323456,
              -89.95804137087981
            ],
            [
              144.50715427383943,
              -89.9588001744396
            ],
            [
              140.95439747973512,
              -89.95775338127548
            ],
            [
              137.72571791907336,
              -89.95634443176878
            ],
            [
              134.8004198033588,
              -89.95455388556942
            ],
            [
              131.13011882051006,
              -89.95478609298502
            ],
            [
              128.5940653953931,
              -89.95660294695527
            ],
            [
              124.69331893186546,
              -89.95701406476228
            ],
            [
              121.36248046804127,
              -89.95543504186489
            ],
            [
              124.24794981190598,
              -89.95377420044458
            ],
            [
              125.50785904143953,
              -89.95126130420549
            ],
            [
              122.10221835087486,
              -89.95051269742919
            ],
            [
              118.7731171801313,
              -89.94882945741399
            ],
            [
              120.07548008722955,
              -89.94690436109406
            ],
            [
              122.15499716338093,
              -89.945420695658
            ],
            [
              124.81499014002509,
              -89.94360516339984
            ],
            [
              128.11191724955415,
              -89.94169645431005
            ],
            [
              127.86000216424486,
              -89.93800290025736
            ],
            [
              124.61217444737935,
              -89.93560276146516
            ],
            [
              121.8520557315386,
              -89.93361053335998
            ],
            [
              124.12996561005679,
              -89.92990004420422
            ],
            [
              126.05288354177043,
              -89.92610419130949
            ],
            [
              129.85002967989732,
              -89.92471498008219
            ],
            [
              130.55776798947755,
              -89.92043280796779
            ],
            [
              128.31411085473087,
              -89.92128623891742
            ],
            [
              126.09952493021251,
              -89.91670839063633
            ],
            [
              124.75147652519314,
              -89.91550119368648
            ],
            [
              120.95346553372741,
              -89.91385011754147
            ],
            [
              117.26178598343057,
              -89.9138286241686
            ],
            [
              114.10011738310072,
              -89.91677034769883
            ],
            [
              110.71286620547585,
              -89.91764422090263
            ],
            [
              108.15360588262638,
              -89.91329767189379
            ],
            [
              110.096938904821,
              -89.90847483470438
            ],
            [
              111.22400211078553,
              -89.9027735362526
            ],
            [
              107.87437205306173,
              -89.90302809925522
            ],
            [
              108.14199105413394,
              -89.89843968201527
            ],
            [
              110.93031612686428,
              -89.89425175634533
            ],
            [
              111.98284263123179,
              -89.8875944236501
            ],
            [
              113.86493038196187,
              -89.88061337266788
            ],
            [
              115.22423705314804,
              -89.87320943548698
            ],
            [
              115.29728681393715,
              -89.87080721545215
            ],
            [
              111.81198099324808,
              -89.87448558076132
            ],
            [
              108.18410334222227,
              -89.87728102750934
            ],
            [
              104.3551700509268,
              -89.87559400615038
            ],
            [
              103.35304780564474,
              -89.86848700994724
            ],
            [
              100.16111692512072,
              -89.86323306065096
            ],
            [
              101.80276027685755,
              -89.85562414903931
            ],
            [
              104.57703527619128,
              -89.84880033222352
            ],
            [
              105.02020433064814,
              -89.84059198599142
            ],
            [
              106.38653603855425,
              -89.83413326080074
            ],
            [
              109.92302752086681,
              -89.83909374388652
            ],
            [
              112.26967806639448,
              -89.83674615560913
            ],
            [
              108.95080340698541,
              -89.83073090478987
            ],
            [
              106.92397410613643,
              -89.82132408395499
            ],
            [
              105.52760771105636,
              -89.80940896487387
            ],
            [
              107.44846213306238,
              -89.80138271023922
            ],
            [
              109.33850046531313,
              -89.79523943608277
            ],
            [
              106.61065443431539,
              -89.78679258771183
            ],
            [
              107.57468520087127,
              -89.77651509221363
            ],
            [
              110.75769443648284,
              -89.76815597776222
            ],
            [
              113.66266091247405,
              -89.75736601467788
            ],
            [
              115.24282381334467,
              -89.74234454142697
            ],
            [
              115.62303306257371,
              -89.72423013114405
            ],
            [
              118.9778598267115,
              -89.71515545645144
            ],
            [
              122.55358075270033,
              -89.70663035350971
            ],
            [
              125.94817559720451,
              -89.69767506427108
            ],
            [
              129.66241719844754,
              -89.70464845203668
            ],
            [
              132.3946557740041,
              -89.701716865811
            ],
            [
              136.10375377384884,
              -89.70423347224843
            ],
            [
              139.6537035878307,
              -89.70950211040127
            ],
            [
              142.6950437786109,
              -89.70888441278055
            ],
            [
              138.8771715062685,
              -89.70348367249584
            ],
            [
              136.66046138058044,
              -89.68653572197958
            ],
            [
              135.1777689674496,
              -89.66752579797343
            ],
            [
              137.05888565478784,
              -89.65164774989292
            ],
            [
              140.19912258267533,
              -89.64072099356673
            ],
            [
              143.83611912582728,
              -89.63940304861966
            ],
            [
              146.05047745736863,
              -89.63202999138883
            ],
            [
              149.29235741098074,
              -89.64414379165969
            ],
            [
              152.78449860755768,
              -89.65014946004375
            ],
            [
              156.3700743096844,
              -89.64117909720927
            ],
            [
              159.98384119580828,
              -89.64976291448357
            ],
            [
              161.57371473057577,
              -89.6622360229868
            ],
            [
              165.29543655449288,
              -89.66767772744734
            ],
            [
              169.0313450076231,
              -89.67503526180658
            ],
            [
              172.45671042329133,
              -89.68490674758146
            ],
            [
              176.38199141026905,
              -89.6877913015262
            ],
            [
              180.3072420515265,
              -89.69064953070149
            ]
          ]
            ]
        }
    }
];

// Créez un groupe de couches pour les provinces
//var provincesLayer = L.layerGroup();

// Ajoutez chaque province à la carte
provinceData.forEach(function (province) {
    L.geoJSON(province, {
        style: {
            color: 'green',
            weight: 2,
            fill: 'none'
        }
    })
    .bindPopup(function () {
        // Personnalisez le contenu de la popup en fonction des propriétés de la province
        var properties = province.properties;
        return `
            <strong>${properties.name}</strong><br>
            Population: ${properties.population}<br>
            Superficie: ${properties.area} km²
        `;
    })
    .addTo(provincesLayer);
});

// Ajoutez le groupe de couches des provinces à la carte
//provincesLayer.addTo(map);

// Gérez l'événement de clic pour chaque province
provincesLayer.eachLayer(function (layer) {
    layer.on('click', function (e) {
        var popup = e.target.getPopup();
        popup.openOn(map);
    });
});


    ///////////////////////////////////    

        var imageUrl = './images/alarian.jpg';
        var imageBounds = [[-8.7, -6], [8.7, 6]];

        var map = L.map('map', {
            zoomSnap: 0.25,
            zoomDelta: 0.51,
            wheelPxPerZoomLevel: 600,
            center: youAreHere,
            layers: [citiesGroup, landmarksGroup, youAreHereGroup],
        });

        var image = L.imageOverlay(imageUrl, imageBounds).addTo(map);
        L.control.scale({ imperial: false }).addTo(map);

        var coordinatesDiv = document.getElementById('coordinates');
        map.on('mousemove', function(event) {
            var lat = event.latlng.lat.toFixed(6);
            var lng = event.latlng.lng.toFixed(6);
            coordinatesDiv.innerHTML = 'Coordonnées : ' + lat + ', ' + lng;
        });

        function addPointsOfInterestToGroup(points, group, icon) {
            points.forEach(function(point) {
                var marker = L.marker(point.latlng, { icon: icon });
                marker.bindTooltip(point.name).openTooltip();
                marker.bindPopup(point.description, { minWidth: 376, maxWidth: 376 });
                marker.addTo(group);
            });
        }

        addPointsOfInterestToGroup(cities, citiesGroup, cityIcon);
        addPointsOfInterestToGroup(landmarks, landmarksGroup, landmarkIcon);
        addPointsOfInterestToGroup(posHeros, youAreHereGroup, hdIcon);

        map.fitBounds(imageBounds);
        image.addTo(map);
        map.setZoom(7.25);

        L.control.layers({}, {
            "Villes": citiesGroup,
            "Point d'Intérêt": landmarksGroup,
            "Vous êtes ici": youAreHereGroup,
            "Provinces": provincesLayer
        }).addTo(map);

        youAreHereGroup.addTo(map);

        // Pour la désactiver
        landmarksGroup.removeFrom(map);

        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        var drawControl = new L.Control.Draw({
            edit: {
                featureGroup: drawnItems,
            },
            draw: {
                polygon: false,
                polyline: {
                    shapeOptions: {
                        color: 'red',
                        weight: 4,
                        lineCap: 'round',
                    },
                    allowIntersection: true,
                    drawError: {
                        color: 'orange',
                        timeout: 1000,
                    },
                    showLength: true,
                },
                circle: false,
                marker: true,
                rectangle: false,
            },
        });

        map.addControl(drawControl);

        map.on('draw:created', function(e) {
            var type = e.layerType;
            var layer = e.layer;

            if (type === 'marker' || type === 'rectangle') {
                // Ajoutez votre logique de mesure ici pour les marqueurs ou les rectangles
            }

            drawnItems.addLayer(layer);
        });

        map.on('draw:created', function(e) {
            var type = e.layerType;
            var layer = e.layer;

            if (type === 'polyline') {
                var latlngs = layer.getLatLngs();
                var length = 0;

                for (var i = 1; i < latlngs.length; i++) {
                    length += latlngs[i - 1].distanceTo(latlngs[i]);
                }

                // Affichez la longueur calculée dans la div que vous avez créée
                var lengthDisplay = document.getElementById('length-display');
                lengthDisplay.textContent = 'Distance : ' + length.toFixed(2) + ' mètres';
            }

            drawnItems.addLayer(layer);
        });

        map.on('draw:edited', function(e) {
            var editedLayers = e.layers;

            editedLayers.eachLayer(function(layer) {
                if (layer instanceof L.Polyline) {
                    var latlngs = layer.getLatLngs();
                    var length = 0;

                    for (var i = 1; i < latlngs.length; i++) {
                        length += latlngs[i - 1].distanceTo(latlngs[i]);
                    }

                    // Mettez à jour la distance dans l'élément HTML où vous affichez la distance
                    document.getElementById('length-display').innerHTML = 'Distance : ' + length + ' mètres';
                }
            });
        });
    </script>
</body>
</html>
